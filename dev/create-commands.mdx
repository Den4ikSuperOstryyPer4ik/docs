---
title: "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥"
description: "–ù–∞—É—á–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ª–µ–≥–∫–æ –∏ –ø—Ä–æ—Å—Ç–æ!"
icon: "diamonds-4"
---

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@command` ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

## –ê—Ä–≥—É–º–µ–Ω—Ç—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `@command`

```python
@command(
    command: Optional[str] = None,
    aliases: Optional[List[str]] = None,
    doc: Optional[str] = None,
    enabled: Optional[Union[str, bool]] = None
)
```

<ParamField path="command" type="str">
  –ò–º—è –∫–æ–º–∞–Ω–¥—ã. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏.
</ParamField>

<ParamField path="aliases" type="list[str]">
  –°–ø–∏—Å–æ–∫ (list) —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–≤ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, `aliases=["e", "exec"]`.
</ParamField>

<ParamField path="doc" type="str">
  –ö–ª—é—á –¥–ª—è —Å—Ç—Ä–æ–∫–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Å–ª–æ–≤–∞—Ä—è `strings` (–∏–ª–∏ —Å–∞–º–æ –æ–ø–∏—Å–∞–Ω–∏–µ). –≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤ –º–µ–Ω—é `.chelp`, –≤ –º–µ–Ω—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ –∏ –≤ —Å–ø–∏—Å–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤.
</ParamField>

<ParamField path="enabled" type="str | bool">
  –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–≤–∫–ª—é—á–µ–Ω–∞/–≤—ã–∫–ª—é—á–µ–Ω–∞) —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø–ª–∞–≥–∏–Ω–∞.
      * `bool`: `True` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ `False`.
      * `str`: –ö–ª—é—á –±—É–ª–µ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`Switch`) –∏–∑ `create_settings()`. –ö–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω–∞, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞.
</ParamField>

## <Icon icon="object-subtract" size={24} iconType="solid" /> `CactusUtils.Command`

–í —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–º–∞–Ω–¥—ã –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç [`CactusUtils.Command`](/dev/utils/CactusUtils#command), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–∑–æ–≤–µ.

## –ü—Ä–∏–º–µ—Ä—ã

**1. –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å –ø—Å–µ–≤–¥–æ–Ω–∏–º–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º**

```python pingpong.plugin icon="python" lines expandable
class MyPlugin(CactusUtils.Plugin):
    strings = {
        "en": {
            "PING_DOC": "Checks if the plugin is working.",
            "pong": "üèì PONG!",
        },
        "ru": {
            "PING_DOC": "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø–ª–∞–≥–∏–Ω.",
            "pong": "üèì –ü–û–ù–ì!",
        }
    }

    @command(aliases=["p"], doc="PING_DOC")
    def ping(self, cmd: CactusUtils.Command):
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º `answer` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
        cmd.answer(self.string("pong"))

        return HookResult(strategy=HookStrategy.CANCEL)
    
    def _on_sent_ping(self, params: CactusUtils.Inline.CallbackParams):
        # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        params.edit(self.string("pong"))

        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        threading.Timer(5, lambda: params.delete()).start()

    @command(aliases=["p2"], doc="PING_DOC")
    def ping2(self, cmd: CactusUtils.Command):
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º `on_sent` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
        cmd.answer("...", on_sent=lambda params: self._on_sent_ping(params))

        return HookResult(strategy=HookStrategy.CANCEL)    
```

**–í—ã–∑–æ–≤:** `.ping` –∏–ª–∏ `.p`.

–í `.chelp`: `.ping - Checks if the plugin is working.` –∏–ª–∏ `.ping - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø–ª–∞–≥–∏–Ω.`

**2. –ö–æ–º–∞–Ω–¥–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏**

```python echo.plugin icon="python" lines expandable
class MyPlugin(CactusUtils.Plugin):
    @command(doc="–ü–æ–≤—Ç–æ—Ä—è–µ—Ç –≤–∞—à–∏ —Å–ª–æ–≤–∞")
    def echo(self, cmd: CactusUtils.Command):
        if not cmd.raw_args:
            cmd.answer("–ú–Ω–µ –Ω–µ—á–µ–≥–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å.")
            return HookResult(strategy=HookStrategy.CANCEL)
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º HTML-–±–µ–∑–æ–ø–∞—Å–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∏–Ω—ä–µ–∫—Ü–∏–π
        safe_text = self.utils.escape_html(cmd.raw_args)
        cmd.answer(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: <b>{safe_text}</b>")

        return HookResult(strategy=HookStrategy.CANCEL)
```

**–í—ã–∑–æ–≤:** `.echo –ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!`
**–û—Ç–≤–µ—Ç:** `–í—ã —Å–∫–∞–∑–∞–ª–∏: <b>–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!</b>`

**3. –ö–æ–º–∞–Ω–¥–∞, –∑–∞–≤–∏—Å—è—â–∞—è –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

```python extraX.plugin icon="python" lines expandable
class MyPlugin(CactusUtils.Plugin):
    def create_settings(self):
        # –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–ª–∞–≥–∏–Ω–∞
        return [Switch(key="extra_feature_enabled", text="–í–∫–ª—é—á–∏—Ç—å —Ñ–∏—á—É X", default=False)]

    @command(doc="–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ñ–∏—á–∏ X", enabled="extra_feature_enabled")
    def extra_cmd(self, cmd: CactusUtils.Command):
        cmd.answer("–§–∏—á–∞ X —Ä–∞–±–æ—Ç–∞–µ—Ç!")

        return HookResult(strategy=HookStrategy.CANCEL)
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∫–ª—é—á–∏—Ç –æ–ø—Ü–∏—é "–í–∫–ª—é—á–∏—Ç—å —Ñ–∏—á—É X" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞.


**4. –ö–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–∂–∏–¥–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –ø–æ—Å–ª–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç**

```python test.plugin icon="python" lines expandable
class MyPlugin(CactusUtils.Plugin):
    def _on_sent(self, params: CactusUtils.Inline.CallbackParams):
        # –í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å

        # –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç
        params.edit("Edited message")

        # –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ
        self.utils.send_message(params.message.getDialogId(), "–û—Ç–≤–µ—Ç –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ", replyToMsg=params.message)

        # –í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        params.delete()

    @command()
    def test(self, cmd: CactusUtils.Command):
        cmd.answer("–û–∂–∏–¥–∞–π—Ç–µ...", on_sent=lambda params: self._on_sent(params))

        return HookResult(strategy=HookStrategy.CANCEL)
```
